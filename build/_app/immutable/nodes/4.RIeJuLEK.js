import{t as M,e as g,a as x,s as d,b as U}from"../chunks/BCViuYXD.js";import{i as V}from"../chunks/oBYXxpFJ.js";import{p as W,t as y,g as t,b as X,s as l,c as s,r as a,m as p,d as r}from"../chunks/BWjiBZrZ.js";import{a as Y,i as R,s as Z}from"../chunks/B6c3gU6M.js";import{r as S}from"../chunks/Dv00Ct0Q.js";import{b as q}from"../chunks/4Q9yigT1.js";import{p as ee}from"../chunks/Bfc47y5P.js";import{g as D}from"../chunks/CZFj2HiF.js";import{u as te,r as re,l as se}from"../chunks/i7Cjmawx.js";var ae=M('<p class="text-red-400 mb-4 text-center bg-red-900/20 p-2 rounded-lg"> </p>'),oe=M('<span class="flex items-center justify-center"><svg class="animate-spin h-5 w-5 mr-2" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8h8a8 8 0 01-8 8 8 8 0 01-8-8z"></path></svg> </span>'),ie=M('<div class="flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-800 to-gray-900"><div class="bg-gray-800 p-8 rounded-xl shadow-2xl w-full max-w-md transform transition-all hover:scale-105"><h1 class="text-4xl font-extrabold text-blue-400 mb-6 text-center tracking-tight"> </h1> <!> <form><div class="mb-6"><label for="username" class="block text-gray-300 mb-2 font-medium">用户名</label> <input id="username" type="text" placeholder="请输入用户名" class="w-full p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"></div> <div class="mb-8"><label for="password" class="block text-gray-300 mb-2 font-medium">密码</label> <input id="password" type="password" placeholder="请输入密码" class="w-full p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition"></div> <button type="submit" class="w-full py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-500 transition transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500"><!></button></form> <p class="mt-6 text-center text-gray-400"><button class="text-blue-400 hover:text-blue-300 transition focus:outline-none focus:ring-2 focus:ring-blue-500"> </button></p></div></div>');function ve(A,F){W(F,!1);const[G,H]=Z(),I=()=>Y(te,"$user",G);let u=p(""),f=p(""),n=p(!1),i=p(""),c=p(!1);I()&&D("/");async function z(){if(!t(u).trim()||!t(f).trim()){r(i,"用户名和密码不能为空！");return}r(c,!0),r(i,"");try{t(n)?await re(t(u),t(f))?(r(i,""),D("/")):r(i,"用户名已存在，请选择其他用户名！"):await se(t(u),t(f))?(r(i,""),D("/")):r(i,"用户名或密码错误！")}catch(e){r(i,"操作失败，请稍后再试！"),console.error("错误:",e)}finally{r(c,!1)}}function B(e){e.key==="Enter"&&(e.preventDefault(),z())}V();var h=ie(),E=s(h),_=s(E),J=s(_,!0);a(_);var K=l(_,2);{var N=e=>{var o=ae(),C=s(o,!0);a(o),y(()=>d(C,t(i))),x(e,o)};R(K,e=>{t(i)&&e(N)})}var m=l(K,2),w=s(m),b=l(s(w),2);S(b),a(w);var k=l(w,2),v=l(s(k),2);S(v),a(k);var $=l(k,2),O=s($);{var P=e=>{var o=oe(),C=l(s(o));a(o),y(()=>d(C,` ${(t(n)?"注册中...":"登录中...")??""}`)),x(e,o)},Q=e=>{var o=U();y(()=>d(o,t(n)?"注册":"登录")),x(e,o)};R(O,e=>{t(c)?e(P):e(Q,!1)})}a($),a(m);var L=l(m,2),j=s(L),T=s(j,!0);a(j),a(L),a(E),a(h),y(()=>{d(J,t(n)?"欢迎注册":"欢迎登录"),b.disabled=t(c),v.disabled=t(c),$.disabled=t(c),d(T,t(n)?"已有账号？去登录":"没有账号？去注册")}),q(b,()=>t(u),e=>r(u,e)),g("keydown",b,B),q(v,()=>t(f),e=>r(f,e)),g("keydown",v,B),g("submit",m,ee(z)),g("click",j,()=>r(n,!t(n))),x(A,h),X(),H()}export{ve as component};
